## Run Time System
- Controls:
	- How to start program execution
	- How to handle program termination
	- How to pass function arguments
	- How to allocate and free memory resources
- Realised via VM translator and its subsequent commands -`pop, push, add, etc`
	- Along with this, some sort of ‘wrapper’ that acts as a sort of ‘main’ function for everything to work together

## High Level Magic
- Allow writing programs in high level terms 

```
x=-b+sqrt(power(b,2)-4*a*c)
```

- Primitive operations like `+ and -` are built into the basic syntax, whereas `sqrt and power` are extensions of the language
- High level languages allow us to never have to worry about how things like this get executed and how we execute multiple things one after another
- Similarly, high level code abstracts away the ability to branch between logic - conditional execution
- The overhead of functions are also abstracted away. Behind the scenes, it needs to:
	- Save the return address (address in memory to return to once a function finishes executing)
	- Save memory resources of the caller
	- Allocate memory resources needed by the callee
	- Make arguments from caller memory available to callee
	- Execute the callee’s code
	- Make the callee’s return value available to caller’s code
	- Free the memory used by the callee
	- Reinstate the saved memory from the caller
	- Resume executing from the return address we initially saved
- The compiler or VM translator handles all of these things without the programmer ever having to worry about it

## Branching
- By default, programs execute sequentially (one instruction after the other)
- We can ‘redirect’ this execution, a for loop, via branching
	- Implemented using `goto` in assembly programming languages, followed by physical memory address of next instruction, or a symbolic label bound to an address
- VM language supports *conditional and unconditional* branching

### Unconditional Branching
- Using `goto`, we jump to execute the command just after the label symbol

### Conditional Branching
- Using `if-goto`, we pop the stack
	- If it’s true,  jump to the command after the label symbol
	- If it’s false, execute the next command in the code
- We need to specify this condition before the `if-goto` command

##### Examples

```
if (n<100) goto LOOP
```

becomes:

```
push n
push 100
lt
if-goto LOOP
```